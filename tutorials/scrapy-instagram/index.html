<!DOCTYPE html>
<html>
  <head>
    <title>The Bonetrade Project</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.64.0" />
<title>Scraping Instagram Post Metadata :: The Bonetrade Project</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/bonetrade.github.io";
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-117669422-1', 'auto');
  ga('send', 'pageview');

</script>

<script src="https://hypothes.is/embed.js" async></script>
    
  </head>
  <body data-url="/tutorials/scrapy-instagram/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://bonetrade.github.io">The Bonetrade Project</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/bonetrade"  rel="noopener">
                  <i class='fa fa-github'></i> <label>Github</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/info-sheet.pdf"  rel="noopener">
                  <i class='fa fa-cloud-download'></i> <label>Download Info Sheet</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/scope"  rel="noopener">
                  <i class='fa fa-info-circle'></i> <label>Scope</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/credits"  rel="noopener">
                  <i class='fa fa-bullhorn'></i> <label>Credits</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/scope/" class="dd-item haschildren
        ">
      <div>
      <a href="/scope/">Scope</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/scope/schedule/" class="dd-item
        ">
      <div>
      <a href="/scope/schedule/">Schedule</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/scope/bibliography/" class="dd-item
        ">
      <div>
      <a href="/scope/bibliography/">Bibliography</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/scope/outputs/" class="dd-item
        ">
      <div>
      <a href="/scope/outputs/">Expectations for What We&#39;ll Learn</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/scope/graduate-opportunities/" class="dd-item
        ">
      <div>
      <a href="/scope/graduate-opportunities/">Graduate Opportunities</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/scope/end-of-project/" class="dd-item
        ">
      <div>
      <a href="/scope/end-of-project/">When This Project Ends</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/papers/" class="dd-item haschildren
        ">
      <div>
      <a href="/papers/">Papers and Publications</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/papers/york-05-29/" class="dd-item">
        <div>
          <a href="/papers/york-05-29/">
            Slides: Public Lecture @ York University, What the Machine Saw
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/papers/stockholm-04-25/" class="dd-item">
        <div>
          <a href="/papers/stockholm-04-25/">
            Slides: Investigating and Policing Antiquities Trafficking and Forgery in a Digital Age
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/papers/fields-02-19/" class="dd-item">
        <div>
          <a href="/papers/fields-02-19/">
            Slides: Workshop on Quantitative Analysis and the Digital Turn in Historical Studies
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/papers/cultpropcrime-06-18/" class="dd-item">
        <div>
          <a href="/papers/cultpropcrime-06-18/">
            Slides: Cultural Property Crime Seminar
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tutorials/" class="dd-item parent haschildren
        ">
      <div>
      <a href="/tutorials/">Tutorials</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/tutorials/blogdown/" class="dd-item
        ">
      <div>
      <a href="/tutorials/blogdown/">Building a Website with Blogdown</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/tutorials/add-new-file/" class="dd-item
        ">
      <div>
      <a href="/tutorials/add-new-file/">Adding New Content Via Github</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/tutorials/scrapy-instagram/" class="dd-item parent active
        ">
      <div>
      <a href="/tutorials/scrapy-instagram/">Scraping Instagram Post Metadata</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/tutorials/sqlite/" class="dd-item
        ">
      <div>
      <a href="/tutorials/sqlite/">Setting up a SQLite DB</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/tutorials/sqlite-to-r/" class="dd-item
        ">
      <div>
      <a href="/tutorials/sqlite-to-r/">Importing SQLite DB into R</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/tutorials/classify-images-with-tensorflow/" class="dd-item haschildren
        ">
      <div>
      <a href="/tutorials/classify-images-with-tensorflow/">Cluster Images with Tensorflow</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/tutorials/classify-images-with-tensorflow/affinity-propagation-in-r/" class="dd-item
        ">
      <div>
      <a href="/tutorials/classify-images-with-tensorflow/affinity-propagation-in-r/">Affinity Propagation in R</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/tutorials/tensorflow-for-poets/" class="dd-item
        ">
      <div>
      <a href="/tutorials/tensorflow-for-poets/">Build an Image Classifier with Tensorflow</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/update/" class="dd-item haschildren
        ">
      <div>
      <a href="/update/">Updates</a><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/update/2019-04-18-blogdown-breakdown/" class="dd-item">
        <div>
          <a href="/update/2019-04-18-blogdown-breakdown/">
            Blogdown Breakdown
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/update/2019-06-17-skeleton-keys/" class="dd-item">
        <div>
          <a href="/update/2019-06-17-skeleton-keys/">
            Skeleton Keys
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/update/2019-02-24-learning-curve/" class="dd-item">
        <div>
          <a href="/update/2019-02-24-learning-curve/">
            Learning Curve
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/update/2018-07-29-dcgan-for-archaeologists/" class="dd-item">
        <div>
          <a href="/update/2018-07-29-dcgan-for-archaeologists/">
            DCGAN for Archaeologists
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/update/2018-06-14-tensorflow-for-poets/" class="dd-item">
        <div>
          <a href="/update/2018-06-14-tensorflow-for-poets/">
            Tensorflow for Poets
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/update/2018-04-30-using-etudier-to-jump-start-a-literature-review/" class="dd-item">
        <div>
          <a href="/update/2018-04-30-using-etudier-to-jump-start-a-literature-review/">
            Using Etudier to Jump Start a Literature Review
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/update/2018-04-16-getting-started/" class="dd-item">
        <div>
          <a href="/update/2018-04-16-getting-started/">
            Getting Started!
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section><center>

<p>Shawn Graham, Carleton University <br> Damien Huffer, Stockholm University <br><img src="/carleton-logo.png"><img src="/stockholm-logo.gif"> </p>

</center>

<script async defer src="https://buttons.github.io/buttons.js"></script>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/scope/" >
   Scope</option>
    <option value="/papers/" >
   Papers and Publications</option>
    <option value="/tutorials/" >
   Tutorials</option> 
    <option value="/tutorials/blogdown/" >
  - 
   Building a Website with Blogdown</option>
    <option value="/tutorials/add-new-file/" >
  - 
   Adding New Content Via Github</option>
    <option value="/tutorials/scrapy-instagram/"  selected>
  - 
   Scraping Instagram Post Metadata</option> 
  
    <option value="/tutorials/sqlite/" >
  - 
   Setting up a SQLite DB</option>
    <option value="/tutorials/sqlite-to-r/" >
  - 
   Importing SQLite DB into R</option>
    <option value="/tutorials/classify-images-with-tensorflow/" >
  - 
   Cluster Images with Tensorflow</option>
    <option value="/tutorials/tensorflow-for-poets/" >
  - 
   Build an Image Classifier with Tensorflow</option>
  
    <option value="/update/" >
   Updates</option>



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/bonetrade.github.io";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Scraping Instagram Post Metadata</h1>
    
    
    

<p>Instagram used to have an API that allowed a very comprehensive exploration of the metadata attached to each . To use this API, one had to register as a developer and agree to the terms of service. <a href="http://pablobarbera.com/">Pablo Barbera</a> from the London School of Economics has developed an excellent package for R, <a href="https://github.com/pablobarbera/instaR">instaR</a> to work with the API. However, changes to the API and the approval process in the last few years has restricted use of the public API to mostly commercial purposes. That is to say, they wish to monetize the content. The result is that using Barbera&rsquo;s package is often not feasible for us.</p>
<p>Other alternatives are possible, and while they do not necessarily provide complete access to the full stream of <em>possible</em> data, they do provide an awful lot. In essence, these approaches involve mimicing an individual paging through search results, very very quickly.</p>
<p>Here we will get started with a python package written by <a href="https://github.com/h4t0n">Github user h4t0n, Andrea Tarquini</a> that depends on the <a href="https://scrapy.org/">Scrapy</a> framework.</p>
<h2 id="requirements">Requirements:</h2>
<ul>
<li>Python</li>
<li>Scrapy</li>
</ul>
<p>If you are on a mac, you already have python installed. We will install Scrapy inside of a virtual environment, so as to avoid making dependency conflicts and so on with other python packages on our machine.</p>
<pre><code>$ mkdir scrapytest
$ virtualenv scrapytest
$ source scrapytest/bin/activate
</code></pre><p>Install Scrapy: <code>$ pip install scrapy</code></p>
<p>Download the <a href="https://github.com/h4t0n/instagram-scraper">instagram-scraper</a> from the repository.</p>
<p>Unzip that file. Then, make a new text file at the same level as the instagram-scraper folder. Give that file the extension <code>.cfg</code></p>
<pre><code>├── instagram-scraper
│   ├── __init__.py
│   ├── items.py
│   ├── pipelines.py
│   ├── settings.py
│   └── spiders
│       ├── __init__.py
│       └── hashtag.py
└── scrapy.cfg
</code></pre><p>Edit that file so that it contains the basic configuration information scrapy needs in order to pull together the scraper that h4t0n made:</p>
<pre><code># basic information for scrapy cfg file

[settings]
default = instagram-scraper.settings

[deploy]
#url = http://localhost:6800/
project = tutorial
</code></pre><p>The first thing this file does is tell scrapy where to find the settings.py file in the <code>instagram-scraper</code> folder. The second line isn&rsquo;t even really needed, but these are the defaults when creating a new scrapy scraper, so we&rsquo;ll keep them for posterity.</p>
<h2 id="running-the-scraper">Running the scraper</h2>
<p>If you look in the <code>instagram-scraper</code> folder, you&rsquo;ll notice the <code>spiders</code> subfolder. The <code>hashtag.py</code> file is the one that lays out how to interact with Instagram. We want Scrapy to use that file, so:</p>
<p><code>$ scrapy crawl hashtag</code></p>
<p>You will then be prompted to enter the target hashtag. The spider will then begin searching and scraping. Output prints to the terminal window and to file.</p>
<h2 id="output">Output</h2>
<p>The output will be in a new folder, &lsquo;scraped&rsquo; and subfolder, &lsquo;hashtag&rsquo;. Each hashtag search will have its own subfolder, and the output file there will have its timestamp as its name. Each line in the output is json formatted. You can concatenate all of the files together with <code>cat * &gt; output.json</code>. To make a properly formatted json file, open <code>output.json</code> in a text editor, add <code>,</code> to each line (except the last one), and put a <code>[</code> at the start of the file and a <code>]</code> at the end.</p>
<p>The data is now ready to be put into a database for further querying.</p>
<p>Deactivate your virtualenv:</p>
<p><code>$ deactivate</code></p>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/tutorials/add-new-file/" title="Adding New Content Via Github"> <i class="fa fa-chevron-left"></i><label>Adding New Content Via Github</label></a>
    <a class="nav nav-next" href="/tutorials/sqlite/" title="Setting up a SQLite DB" style="margin-right: 0px;"><label>Setting up a SQLite DB</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="https://github.com/bonetrade/bonetrade.github.io/tutorials/Scrapy-Instagram/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    <p><img src="https://raw.githubusercontent.com/bonetrade/bonetrade.github.io/master/_footer_files/SSHRC-CRSH_FIP.jpg" alt="SSHRC Logo"></p>
<p>This research was supported by the Social Sciences and Humanities Research Council of Canada</p>

  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>


    

    
    

    
  </body>
</html>